(function(){var e={833:function(){},901:function(){},527:function(e,t,n){var a=n(833);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),n(346).Z("4ddbff39",a,!0,{})},150:function(e,t,n){var a=n(901);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),n(346).Z("4ed1ac0a",a,!0,{})},346:function(e,t,n){"use strict";function a(e,t){for(var n=[],a={},o=0;o<t.length;o++){var i=t[o],s=i[0],r={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};a[s]?a[s].parts.push(r):n.push(a[s]={id:s,parts:[r]})}return n}n.d(t,{Z:function(){return f}});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},s=o&&(document.head||document.getElementsByTagName("head")[0]),r=null,l=0,u=!1,p=function(){},c=null,d="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,n,o){u=n,c=o||{};var s=a(e,t);return h(s),function(t){for(var n=[],o=0;o<s.length;o++){var r=i[s[o].id];r.refs--,n.push(r)}t?h(s=a(e,t)):s=[];for(var o=0;o<n.length;o++){var r=n[o];if(0===r.refs){for(var l=0;l<r.parts.length;l++)r.parts[l]();delete i[r.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],a=i[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(g(n.parts[o]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{for(var s=[],o=0;o<n.parts.length;o++)s.push(g(n.parts[o]));i[n.id]={id:n.id,refs:1,parts:s}}}}function y(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function g(e){var t,n,a=document.querySelector("style["+d+'~="'+e.id+'"]');if(a){if(u)return p;a.parentNode.removeChild(a)}if(m){var o=l++;t=_.bind(null,a=r||(r=y()),o,!1),n=_.bind(null,a,o,!0)}else t=b.bind(null,a=y()),n=function(){a.parentNode.removeChild(a)};return t(e),function(a){a?(a.css!==e.css||a.media!==e.media||a.sourceMap!==e.sourceMap)&&t(e=a):n()}}var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function _(e,t,n,a){var o=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=v(t,o);else{var i=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function b(e,t){var n=t.css,a=t.media,o=t.sourceMap;if(a&&e.setAttribute("media",a),c.ssrId&&e.setAttribute(d,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={id:a,exports:{}};return e[a](i,i.exports,n),i.exports}n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="bundles/mltisafemultisafepay/",window?.__sw__?.assetPath&&(n.p=window.__sw__.assetPath+"/bundles/mltisafemultisafepay/"),function(){"use strict";n(527);let{Component:e,Mixin:t}=Shopware,{Criteria:a}=Shopware.Data;e.register("multisafepay-refund",{template:'<template>\n    <sw-card title="Refund"\n             v-show="isRefundAllowed"\n             :isLoading="isLoading"\n             class="sw-order-detail-base__line-item-grid-card">\n        <sw-number-field label="Amount" v-model:value="amount"\n                         placeholder="0.00" numberType="float" :step="0.01"\n                         :max="maxRefundableAmount" :disabled="isRefundDisabled" />\n        <sw-button variant="primary" @click="showRefundModal()" :disabled="isRefundDisabled">Refund</sw-button>\n        <span class="float-right">\n            <strong>Amount refunded: {{ order ? order.currency.symbol : \'currency\' }}&nbsp;{{ refundedAmount }}</strong>\n        </span>\n        <sw-modal v-show="showModal" title="MultiSafepay refund" variant="small" @modal-close="closeModal()">\n            Are you sure you want to refund {{ order ? order.currency.symbol : \'currency\' }}{{ this.amount }}?\n            <br/>\n            <template #modal-footer>\n                <sw-button @click="closeModal()" size="small">\n                    {{ $tc(\'global.default.cancel\') }}\n                </sw-button>\n                <sw-button @click="applyRefund()"\n                           size="small"\n                           variant="primary">\n                    {{ $tc(\'global.default.apply\') }}\n                </sw-button>\n            </template>\n        </sw-modal>\n    </sw-card>\n</template>\n',inject:["repositoryFactory","orderService","stateStyleDataProviderService","multiSafepayApiService"],mixins:[t.getByName("notification")],props:{orderId:{type:String,required:!0}},data(){return{amount:null,isLoading:null,versionContext:null,order:null,maxRefundableAmount:0,isRefundAllowed:!0,refundedAmount:0,showModal:!1,isRefundDisabled:!1}},watch:{orderId(){this.createdComponent()},amount(){this.amount=parseFloat(this.amount).toFixed(2)},refundedAmount(){this.refundedAmount=parseFloat(this.refundedAmount).toFixed(2)}},methods:{closeModal(){this.showModal=!1},showRefundModal(){if(this.amount<.01){this.createNotificationWarning({title:"Invalid amount",message:"Fill in a valid amount"});return}this.showModal=!0},applyRefund(){this.closeModal(),this.multiSafepayApiService.refund(this.amount,this.orderId).then(e=>{if(!1===e.status){this.createNotificationError({title:"Failed to refund",message:e.message});return}this.createNotificationSuccess({title:"Success",message:"Successfully refunded"}),this.reloadEntityData()})},createdComponent(){this.versionContext=Shopware.Context.api,this.reloadEntityData()},reloadEntityData(){return this.isLoading=!0,this.orderRepository.get(this.orderId,this.versionContext,this.orderCriteria).then(e=>(this.order=e,this.multiSafepayApiService.getRefundData(this.order.id).then(e=>{this.isRefundAllowed=e.isAllowed,this.refundedAmount=e.refundedAmount,this.maxRefundableAmount=this.order.amountTotal-this.refundedAmount,this.isRefundDisabled=this.order.amountTotal-this.refundedAmount==0,this.isLoading=!1}).catch(()=>{this.isRefundAllowed=!1}),Promise.resolve())).catch(()=>Promise.reject())}},computed:{orderRepository(){return this.repositoryFactory.create("order")},orderCriteria(){let e=new a(this.page,this.limit);return e.addAssociation("currency"),e}},created(){this.createdComponent()}});let{Component:o,Mixin:i}=Shopware;o.register("multisafepay-verify-api-key",{template:'<div>\n    <sw-button-process\n        :isLoading="isLoading"\n        @click="check"\n    >{{ $tc(\'multisafepay-verify-api-key.apiButton\') }}</sw-button-process>\n</div>\n',inject:["multiSafepayApiService"],mixins:[i.getByName("notification")],data(){return{isLoading:!1,maxAttempts:10}},computed:{globalPluginConfig(){let e=this.$parent;for(let t=0;t<this.maxAttempts;t++){if(e&&e.actualConfigData)return e.actualConfigData.null;e=e.$parent}return null},actualPluginConfig(){let e;let t=this.$parent;for(let n=0;n<this.maxAttempts&&t&&t.currentSalesChannelId;n++){if(e=t.currentSalesChannelId,t&&t.actualConfigData&&t.actualConfigData[e])return t.actualConfigData[e];t=t.$parent}return null}},methods:{check(){this.isLoading=!0,this.multiSafepayApiService.verifyApiKey(this.globalPluginConfig,this.actualPluginConfig).then(e=>{if(!1===e.success){this.createNotificationWarning({title:"MultiSafepay",message:this.$tc("multisafepay-verify-api-key.error")}),this.isLoading=!1;return}this.createNotificationSuccess({title:"MultiSafepay",message:this.$tc("multisafepay-verify-api-key.success")}),this.isLoading=!1})}}}),n(150);let{Component:s}=Shopware;s.register("multisafepay-support",{template:'<template>\n    <div id="multisafepay-support">\n        <h2 class="multisafepay-title">{{ $tc("msp-support.documentation") }}</h2>\n        <p>{{ $tc("msp-support.read_docs") }}:</p>\n        <ul class="multisafepay-ul">\n            <li>\n                <a href="https://docs.multisafepay.com/docs/shopware#shopware-6" target="_blank" rel="noopener">\n                    {{ $tc(\'msp-support.manual\') }}\n                </a>\n            </li>\n            <li>\n                <a href="https://github.com/MultiSafepay/shopware6/blob/master/CHANGELOG.md"\n                   target="_blank" rel="noopener">\n                    {{ $tc("msp-support.changelog") }}\n                </a>\n            </li>\n        </ul>\n        <p class="mt-1">{{ $tc("msp-support.for_developers") }}:</p>\n        <ul class="multisafepay-ul">\n            <li>\n                <a href="https://docs.multisafepay.com/reference/introduction" target="_blank" rel="noopener">\n                    {{ $tc("msp-support.api_documentation") }}\n                </a>\n            </li>\n            <li>\n                <a href="https://github.com/MultiSafepay/Shopware6" target="_blank" rel="noopener">\n                    MultiSafepay GitHub\n                </a>\n            </li>\n        </ul>\n        <h2 class="mt-2">{{ $tc("msp-support.account")}}</h2>\n        <p>\n            {{ $tc("msp-support.multisafepay_account_needed") }}\n            <br/>\n            <span v-html=\'$tc("msp-support.multisafepay_test_account")\'></span>\n        </p>\n        <p class="mt-2">\n            <span v-html=\'$tc("msp-support.multisafepay_live_account")\'></span>\n        </p>\n        <ul class="multisafepay-ul-none">\n            <li>\n                {{ $tc("msp-support.telephone") }}:\n                <a href="tel:+31208500501">\n                    +31 (0)20 - 8500501\n                </a>\n            </li>\n            <li>\n                {{ $tc("msp-support.e-mail") }}:\n                <a href="mailto:sales@multisafepay.com">\n                    sales@multisafepay.com\n                </a>\n            </li>\n        </ul>\n        <h2 class="mt-2">{{ $tc("msp-support.contact") }}</h2>\n        <p>\n            {{ $tc("msp-support.multisafepay_assistance_integration_team") }}\n        </p>\n        <ul class="multisafepay-ul-none">\n            <li>\n                {{ $tc("msp-support.telephone") }}:\n                <a href="tel:+31208500500">\n                    +31 (0)20 - 8500500\n                </a>\n            </li>\n            <li>\n                {{ $tc("msp-support.e-mail") }}:\n                <a href="mailto:integration@multisafepay.com">\n                    integration@multisafepay.com\n                </a>\n            </li>\n        </ul>\n    </div>\n</template>\n'});let{Component:r}=Shopware;r.override("sw-settings-payment-detail",{template:'{% block sw_settings_payment_detail_content_field_after_order_enabled %}\n    {% parent %}\n    <sw-switch-field\n            v-if="tokenizationSupported"\n            v-model:value="paymentMethod.customFields.tokenization"\n            name="sw-field--paymentMethod-customFields.tokenization"\n            class="sw-settings-payment-detail__field-custom-fields-tokenization"\n            label="Tokenization"\n            :help-text="$tc(\'multisafepay-tokenization.help_text\')"\n    ></sw-switch-field>\n    <sw-switch-field\n            v-if="componentSupported"\n            v-model:value="paymentMethod.customFields.component"\n            name="sw-field--paymentMethod-customFields.component"\n            class="sw-settings-payment-detail__field-custom-fields-component"\n            label="Component"\n            :help-text="$tc(\'multisafepay-component.help_text\')"\n    ></sw-switch-field>\n    <sw-switch-field\n            v-if="paymentMethod.name.toLowerCase().includes(\'mybank\')"\n            v-model:value="paymentMethod.customFields.direct"\n            name="sw-field--paymentMethod-customFields.direct"\n            class="sw-settings-payment-detail__field-custom-fields-direct"\n            label="Pay inside checkout"\n            :help-text="$tc(\'multisafepay-direct.help_text\')"\n    ></sw-switch-field>\n{% endblock %}\n',data(){return{tokenizationSupported:!1,componentSupported:!1}},inject:["multiSafepayApiService"],watch:{paymentMethod(){this.paymentMethod||(this.paymentMethod={}),this.paymentMethod.id||(this.paymentMethod.id=null),this.paymentMethod.customFields||(this.paymentMethod.customFields={}),this.paymentMethod.customFields.tokenization||(this.paymentMethod.customFields.tokenization=!1),this.paymentMethod.customFields.component||(this.paymentMethod.customFields.component=!1),this.paymentMethod.customFields.direct||(this.paymentMethod.customFields.direct=!1),this.reloadEntityData()}},mounted(){this.reloadEntityData()},methods:{reloadEntityData(){this.multiSafepayApiService.isTokenizationAllowed(this.$route.params.id).then(e=>{this.tokenizationSupported=e.supported}),this.multiSafepayApiService.isComponentAllowed(this.$route.params.id).then(e=>{this.componentSupported=e.supported})}}}),Shopware.Component.override("sw-order-detail-general",{template:'{% block sw_order_detail_general_line_items_card %}\n    {% parent %}\n    <multisafepay-refund :orderId="orderId"/>\n{% endblock %}\n'}),Shopware.Component.override("sw-order-detail-base",{template:'{% block sw_order_detail_base_line_items_card %}\n    {% parent %}\n    <multisafepay-refund :orderId="orderId"/>\n{% endblock %}\n'});let l=Shopware.Classes.ApiService;class u extends l{constructor(e,t,n="multisafepay"){super(e,t,n)}refund(e,t){let n=`${this.getApiBasePath()}/refund`;return this.httpClient.post(n,{amount:100*e,orderId:t},{headers:this.getBasicHeaders()}).then(e=>l.handleResponse(e)).catch(e=>l.handleResponse(e))}getRefundData(e){let t=`${this.getApiBasePath()}/get-refund-data`;return this.httpClient.post(t,{orderId:e},{headers:this.getBasicHeaders()}).then(e=>l.handleResponse(e))}verifyApiKey(e,t){let n=`${this.getApiBasePath()}/verify-api-key`,a=this.getBasicHeaders();return this.httpClient.post(n,{globalPluginConfig:e,actualPluginConfig:t},{headers:a}).then(e=>l.handleResponse(e))}isTokenizationAllowed(e){let t=`${this.getApiBasePath()}/tokenization-allowed`;return this.httpClient.post(t,{paymentMethodId:e},{headers:this.getBasicHeaders()}).then(e=>l.handleResponse(e)).catch(e=>l.handleResponse(e))}isComponentAllowed(e){let t=`${this.getApiBasePath()}/component-allowed`;return this.httpClient.post(t,{paymentMethodId:e},{headers:this.getBasicHeaders()}).then(e=>l.handleResponse(e)).catch(e=>l.handleResponse(e))}}var p=JSON.parse('{"multisafepay-verify-api-key":{"success":"Die Verbindung wurde erfolgreich hergestellt","error":"Verbindung konnte nicht hergestellt werden. Bitte \xfcberpr\xfcfen Sie Ihre API-Anmeldeinformationen","apiButton":"API Verbindung testen"},"msp-support":{"documentation":"Dokumentation","api_documentation":"API Dokumentation","read_docs":"Lesen Sie in unserem Dokumentationen mehr \xfcber MultiSafepay und wie Sie mit uns starten k\xf6nnen","manual":"Anleitung","changelog":"\xc4nderungsprotokoll","faq":"FAQ","for_developers":"F\xfcr Entwickler","account":"Account","e-mail":"E-Mail","telephone":"Telefon","contact":"Kontakt","multisafepay_account_needed":"Um dieses Plugin nutzen zu k\xf6nnen ben\xf6tigen Sie einen MultiSafepay-Account.","multisafepay_test_account":"Wenn Sie einen genauen \xdcberblick \xfcber die Services von MultiSafepay bekommen m\xf6chten, k\xf6nnen Sie einfach einen <a href=\\"https://testmerchant.multisafepay.com/signup\\" target=\\"_blank\\" rel=\\"noopener\\">Test-Account</a> er\xf6ffnen.","multisafepay_assistance_integration_team":"Sie brauchen Hilfe? Kontaktieren Sie unser Integrations-Team:","multisafepay_live_account":"Wenn Sie einen Account er\xf6ffnen wollen, k\xf6nnen Sie einfach einen <a href=\\"https://merchant.multisafepay.com/signup\\" target=\\"_blank\\" rel=\\"noopener\\">Live-Account</a> er\xf6ffnen oder kontaktieren Sie das MultiSafepay Sales-Department:"},"multisafepay-tokenization":{"help_text":"Weitere Informationen zur Tokenisierung finden Sie in unserem <a href=\\"https://docs.multisafepay.com/docs/recurring-payments/\\" target=\\"_blank\\" style=\\"color:#fff\\">Dokumentationscenter.</a>"},"multisafepay-component":{"help_text":"Sehen Sie sich unser <a href=\\"https://docs.multisafepay.com/docs/payment-components\\" target=\\"_blank\\" style=\\"color:#fff\\">Dokumentationscenter.</a> an, um mehr \xfcber die Zahlungskomponente zu erfahren."},"multisafepay-direct":{"help_text":"Die Zahlung auf der Checkout-Seite aktivieren."}}'),c=JSON.parse('{"multisafepay-verify-api-key":{"success":"Connection was successfully established","error":"Connection could not be established. Please check your API credentials","apiButton":"Validate API credentials"},"msp-support":{"documentation":"Documentation","api_documentation":"API Documentation","read_docs":"Read our documentation for more information about MultiSafepay and how to get started","manual":"Manual","changelog":"Changelog","faq":"FAQ","for_developers":"For developers","account":"Account","e-mail":"E-mail","telephone":"Telephone","contact":"Contact","multisafepay_account_needed":"To use this plugin you need a MultiSafepay account.","multisafepay_test_account":"If you would like to have a clear overview of what MultiSafepay has to offer, feel free to create a <a href=\\"https://testmerchant.multisafepay.com/signup\\" target=\\"_blank\\" rel=\\"noopener\\">test account</a>.","multisafepay_assistance_integration_team":"Need assistance? Feel free to contact our integration team:","multisafepay_live_account":"If you would like to set up a live account, feel free to create a <a href=\\"https://merchant.multisafepay.com/signup\\" target=\\"_blank\\" rel=\\"noopener\\">live account</a> or contact the MultiSafepay Sales department:"},"multisafepay-tokenization":{"help_text":"Check out our <a href=\\"https://docs.multisafepay.com/docs/recurring-payments/\\" target=\\"_blank\\" style=\\"color:#fff\\">documentation center</a> to found more about tokenization."},"multisafepay-component":{"help_text":"Check out our <a href=\\"https://docs.multisafepay.com/docs/payment-components/\\" target=\\"_blank\\" style=\\"color:#fff\\">documentation center</a> to found more about Payment Component."},"multisafepay-direct":{"help_text":"Enable the payment inside the checkout page"}}'),d=JSON.parse('{"multisafepay-verify-api-key":{"success":"De verbinding is succesvol tot stand gekomen","error":"De verbinding is niet tot stand gekomen. Controleer uw API gegevens","apiButton":"Controleer API gegevens"},"msp-support":{"documentation":"Documentatie","api_documentation":"API documentatie","read_docs":"Lees onze documentatie voor meer informatie over MultiSafepay en hoe u aan de slag kunt gaan","manual":"Handleiding","changelog":"Changelog","faq":"FAQ","for_developers":"Voor Ontwikkelaars","account":"Account","e-mail":"E-mail","telephone":"Telefoon","contact":"Contact","multisafepay_account_needed":"Om deze plugin te gebruiken heeft u een MultiSafepay-account nodig.","multisafepay_test_account":"Wilt u een duidelijk overzicht van wat MultiSafepay te bieden heeft, maak dan gerust een <a href=\\"https://testmerchant.multisafepay.com/signup\\" target=\\"_blank\\" rel=\\"noopener\\">testaccount</a> aan.","multisafepay_assistance_integration_team":"Assistentie nodig? Neem gerust contact op met ons integratie team:","multisafepay_live_account":"Wilt u een live account aanmaken, maak dan gerust een <a href=\\"https://merchant.multisafepay.com/signup\\" target=\\"_blank\\" rel=\\"noopener\\">live account</a> aan of neem contact op met de MultiSafepay Sales afdeling:"},"multisafepay-tokenization":{"help_text":"Bekijk ons <a href=\\"https://docs.multisafepay.com/docs/recurring-payments/\\" target=\\"_blank\\" style=\\"color:#fff\\">documentatiecentrum</a> voor meer informatie over tokenization."},"multisafepay-component":{"help_text":"Bekijk ons <a href=\\"https://docs.multisafepay.com/docs/payment-components/\\" target=\\"_blank\\" style=\\"color:#fff\\">documentatiecentrum</a> voor meer informatie over Payment Component."},"multisafepay-direct":{"help_text":"Activeer de betaling binnen de afrekenpagina."}}');let{Application:m}=Shopware;m.addServiceProvider("multiSafepayApiService",e=>new u(m.getContainer("init").httpClient,e.loginService)),Shopware.Locale.extend("de-DE",p),Shopware.Locale.extend("en-GB",c),Shopware.Locale.extend("nl-NL",d)}()})();