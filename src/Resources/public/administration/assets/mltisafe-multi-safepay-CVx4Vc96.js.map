{"version":3,"file":"mltisafe-multi-safepay-CVx4Vc96.js","sources":["../../../app/administration/src/components/multisafepay-refund/multisafepay-refund.html.twig","../../../app/administration/src/components/multisafepay-refund/index.js","../../../app/administration/src/components/multisafepay-verify-api-key/multisafepay-verify-api-key.html.twig","../../../app/administration/src/components/multisafepay-verify-api-key/index.js","../../../app/administration/src/components/multisafepay-support/multisafepay-support.html.twig","../../../app/administration/src/components/multisafepay-support/index.js","../../../app/administration/src/paymentMethodSettings/sw-settings-payment-detail.html.twig","../../../app/administration/src/paymentMethodSettings/index.js","../../../app/administration/src/override/sw-order-detail-general/sw-order-detail-general.html.twig","../../../app/administration/src/override/sw-order-detail-general/index.js","../../../app/administration/src/override/sw-order-detail/sw-order-detail.html.twig","../../../app/administration/src/override/sw-order-detail/index.js","../../../app/administration/src/service/MultiSafepayApi.service.js","../../../app/administration/src/main.js"],"sourcesContent":["<template v-if=\"isRefundAllowed\">\n    <mt-card\n        title=\"Refund\"\n        :isLoading=\"isLoading\"\n        class=\"sw-order-detail-base__line-item-grid-card\"\n        role=\"region\"\n        :aria-label=\"$t('multisafepay-refund.refund_options')\">\n        <mt-number-field\n            label=\"Amount\"\n            name=\"sw-field--amount\"\n            v-model=\"amount\"\n            placeholder=\"0.00\"\n            number-type=\"float\"\n            :step=\"0.01\"\n            :max=\"maxRefundableAmount\"\n            :disabled=\"isRefundDisabled\"\n            aria-required=\"true\">\n        </mt-number-field>\n        <mt-button\n            variant=\"primary\"\n            @click=\"showRefundModal()\"\n            :disabled=\"isRefundDisabled\"\n            :aria-label=\"$t('multisafepay-refund.process_refund')\">\n            Refund\n        </mt-button>\n        <span class=\"float-right\">\n            <strong>Amount refunded: {{ order ? order.currency.symbol : 'currency' }}&nbsp;{{ refundedAmount }}</strong>\n        </span>\n        <sw-modal\n            v-show=\"showModal\"\n            title=\"MultiSafepay refund\"\n            variant=\"small\"\n            @modal-close=\"closeModal()\"\n            role=\"dialog\"\n            aria-live=\"polite\"\n            :aria-label=\"$t('multisafepay-refund.confirm_refund')\">\n            <template #default>\n                Are you sure you want to refund {{ order ? order.currency.symbol : 'currency' }}{{ this.amount }}?\n                <br/>\n            </template>\n            <template #modal-footer>\n                <mt-button\n                    @click=\"closeModal()\"\n                    size=\"small\"\n                    :aria-label=\"$t('multisafepay-refund.cancel_refund')\">\n                    {{ $t('global.default.cancel') }}\n                </mt-button>\n                <mt-button @click=\"confirmRefund()\"\n                    size=\"small\"\n                    variant=\"primary\"\n                    :aria-label=\"$t('multisafepay-refund.confirm_process_refund')\">\n                    {{ $t('multisafepay-refund.confirm') }}\n                </mt-button>\n            </template>\n        </sw-modal>\n    </mt-card>\n</template>\n","// Import the SCSS file for this component\nimport './multisafepay-refund.scss';\n\n// Import the Twig template for this component\nimport template from './multisafepay-refund.html.twig';\n\n// Import the necessary objects from Shopware\nconst {Component, Mixin} = Shopware;\nconst {Criteria} = Shopware.Data;\n\n// Register the 'multisafepay-refund' component with Shopware\nComponent.register('multisafepay-refund', {\n    // Define the template for this component\n    template,\n\n    // Define the services that this component will use\n    inject: [\n        'repositoryFactory',\n        'orderService',\n        'stateStyleDataProviderService',\n        'multiSafepayApiService'\n    ],\n\n    // Define the mixins that this component will use\n    mixins: [\n        Mixin.getByName('notification')\n    ],\n\n    // Define the properties that this component will receive\n    props: {\n        orderId: {\n            type: String,\n            required: true\n        },\n    },\n\n    // Define the data that this component will manage\n    data() {\n        return {\n            amount: null,\n            isLoading: null,\n            versionContext: null,\n            order: null,\n            maxRefundableAmount: 0,\n            isRefundAllowed: true,\n            refundedAmount: 0,\n            showModal: false,\n            isRefundDisabled: false,\n            isFirstTab: false\n        };\n    },\n\n    // Define the watchers that this component will use\n    watch: {\n        orderId() {\n            this.createdComponent();\n        },\n        amount() {\n            this.amount = parseFloat(this.amount).toFixed(2);\n        },\n        refundedAmount() {\n            this.refundedAmount = parseFloat(this.refundedAmount).toFixed(2);\n        }\n    },\n\n    // Define the methods that this component will use\n    methods: {\n        // This method is used to close the refund modal\n        closeModal() {\n            this.showModal = false;\n            this.isFirstTab = true;\n        },\n\n        // This method is used to show the refund modal.\n        // It also validates the refund amount.\n        showRefundModal() {\n            if (this.amount < 0.01) {\n                this.createNotificationWarning({\n                    title: 'Invalid amount',\n                    message: 'Fill in a valid amount'\n                });\n                return;\n            }\n            this.showModal = true;\n            this.isFirstTab = true;\n        },\n\n        // This method is used to confirm the refund.\n        // It calls the refund API and handles the response.\n        confirmRefund() {\n            if (this.isLoading) {\n                return;\n            }\n\n            this.isLoading = true;\n            this.closeModal();\n\n            this.multiSafepayApiService.refund(this.amount, this.orderId)\n                .then((ApiResponse) => {\n                    if (ApiResponse.status === false) {\n                        this.createNotificationError({\n                            title: 'Failed to refund',\n                            message: 'The refund could not be processed. ' +\n                                'Please check the payment status and try again. ' +\n                                'Error details: ' + ApiResponse.message\n                        });\n                        return;\n                    }\n\n                    this.createNotificationSuccess({\n                        title: 'Success',\n                        message: 'Successfully refunded'\n                    });\n\n                    this.reloadEntityData();\n                })\n                .catch((error) => {\n                    this.createNotificationError({\n                        title: 'Error',\n                        message: 'An unexpected error occurred while processing the refund. ' +\n                            'Please contact support if this problem persists. ' +\n                            'Error details: ' + (error.message || 'Unknown error')\n                    });\n                })\n                .finally(() => {\n                    this.isLoading = false;\n                });\n        },\n\n        // This method is called when the component is created.\n        // It sets the version context and reloads the entity data.\n        createdComponent() {\n            this.versionContext = Shopware.Context.api;\n            this.reloadEntityData();\n        },\n\n        // This method is used to reload the entity data.\n        // It fetches the order data and refunds data from the API.\n        reloadEntityData() {\n            this.isLoading = true;\n            return this.orderRepository.get(this.orderId, this.versionContext, this.orderCriteria).then((response) => {\n                this.order = response;\n                this.multiSafepayApiService.getRefundData(this.order.id).then((data) => {\n                    this.isRefundAllowed = data.isAllowed;\n                    this.refundedAmount = data.refundedAmount;\n                    this.maxRefundableAmount = this.order.amountTotal - this.refundedAmount;\n                    this.isRefundDisabled = (this.order.amountTotal - this.refundedAmount === 0);\n                    this.isLoading = false;\n                }).catch(() => {\n                    this.isRefundAllowed = false;\n                })\n                return Promise.resolve();\n            }).catch(() => {\n                return Promise.reject();\n            });\n        },\n\n        // Handle keyboard events for closing modal with Escape key and Tab navigation\n        handleKeydown(event) {\n            if (event.key === 'Escape' && this.showModal) {\n                this.closeModal();\n            }\n\n            // Handle the Tab key to focus close button on the first tab\n            if (event.key === 'Tab' && this.showModal && this.isFirstTab) {\n                event.preventDefault();\n                this.focusModalCloseButton();\n                this.isFirstTab = false;\n            }\n        },\n\n        // This method is used to focus on the modal's close button (X icon)\n        focusModalCloseButton() {\n            const closeButton = document.querySelector('.sw-modal__close');\n            if (closeButton) {\n                closeButton.focus();\n            }\n        }\n    },\n\n    // Define the computed properties that this component will use\n    computed: {\n        orderRepository() {\n            return this.repositoryFactory.create('order');\n        },\n        orderCriteria() {\n            const criteria = new Criteria(this.page, this.limit);\n            return criteria.addAssociation('currency');\n        },\n    },\n\n    // Define the lifecycle hooks that this component will use\n    created() {\n        this.createdComponent();\n    },\n\n    // Add keyboard event listener when component is mounted\n    mounted() {\n        document.addEventListener('keydown', this.handleKeydown);\n    },\n\n    // Remove keyboard event listener when component is destroyed\n    beforeDestroy() {\n        document.removeEventListener('keydown', this.handleKeydown);\n    }\n});\n","<div>\n    <sw-button-process\n        :isLoading=\"isLoading\"\n        @click=\"check\">\n        {{ $t('multisafepay-verify-api-key.apiButton') }}\n    </sw-button-process>\n</div>\n","// Import the necessary modules from Shopware\nconst {Component, Mixin} = Shopware;\n\n// Import the template for this component\nimport template from './multisafepay-verify-api-key.html.twig';\n\n// Register the component with Shopware\nComponent.register('multisafepay-verify-api-key', {\n    // Specify the template to use for this component\n    template,\n\n    // Inject the multiSafepayApiService into this component\n    inject: [\n        'multiSafepayApiService'\n    ],\n\n    // Use the notification mixin\n    mixins: [\n        Mixin.getByName('notification')\n    ],\n\n    // Define the data for this component\n    data() {\n        return {\n            // Define a loading state\n            isLoading: false,\n\n            // Define the maximum number of attempts\n            maxAttempts: 10\n        };\n    },\n\n    // Define computed properties\n    computed: {\n        // Define a computed property for the global plugin configuration\n        globalPluginConfig() {\n            let configData;\n            let parent = this.$parent;\n\n            // Try to find the global plugin configuration in the parent components\n            for (let i = 0; i < this.maxAttempts; i++) {\n                if (parent && parent.actualConfigData) {\n                    configData = parent.actualConfigData.null;\n                    return configData;\n                }\n                parent = parent.$parent;\n            }\n            return null;\n        },\n\n        // Define a computed property for the actual plugin configuration\n        actualPluginConfig() {\n            let currentSalesChannelId;\n            let actualConfigData;\n            let parent = this.$parent;\n\n            // Try to find the actual plugin configuration in the parent components\n            for (let i = 0; i < this.maxAttempts; i++) {\n                if (parent && parent.currentSalesChannelId) {\n                    currentSalesChannelId = parent.currentSalesChannelId;\n                } else {\n                    return null;\n                }\n\n                if (parent && parent.actualConfigData && parent.actualConfigData[currentSalesChannelId]) {\n                    actualConfigData = parent.actualConfigData[currentSalesChannelId];\n                    return actualConfigData;\n                }\n                parent = parent.$parent;\n            }\n            return null;\n        }\n    },\n\n    // Define methods for this component\n    methods: {\n        // Define a method to check the API key\n        check() {\n            // Set the loading state to true\n            this.isLoading = true;\n\n            // Call the verifyApiKey method of the multiSafepayApiService\n            this.multiSafepayApiService.verifyApiKey(this.globalPluginConfig, this.actualPluginConfig).then((ApiResponse) => {\n                // If the API response is not successful, show a warning notification\n                if (ApiResponse.success === false) {\n                    this.createNotificationWarning({\n                        title: 'MultiSafepay',\n                        message: this.$t('multisafepay-verify-api-key.error')\n                    })\n                    // Set the loading state to false\n                    this.isLoading = false;\n                    return;\n                }\n                // If the API response is successful, show a success notification\n                this.createNotificationSuccess({\n                    title: 'MultiSafepay',\n                    message: this.$t('multisafepay-verify-api-key.success')\n                });\n                // Set the loading state to false\n                this.isLoading = false;\n            });\n        },\n    }\n});\n","<template>\n    <div class=\"multisafepay-support\" role=\"region\" :aria-label=\"'MultiSafepay ' + $t('multisafepay-support.documentation')\">\n        <mt-container>\n            <h2 class=\"multisafepay-title\">{{ $t(\"multisafepay-support.documentation\") }}</h2>\n            <p class=\"mb-1\">{{ $t(\"multisafepay-support.read_docs\") }}:</p>\n\n            <h3 class=\"mt-1\">{{ $t(\"multisafepay-support.general_information\") }}</h3>\n            <ul class=\"multisafepay-ul\">\n                <li>\n                    <a href=\"https://docs.multisafepay.com/docs/shopware-6\"\n                       target=\"_blank\"\n                       rel=\"noopener\"\n                       :aria-label=\"$t('multisafepay-support.manual') + ' - ' + $t('multisafepay-support.external_link')\">\n                        {{ $t('multisafepay-support.manual') }}\n                        <span class=\"sr-only\"> – Opens in a new window</span>\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://github.com/MultiSafepay/shopware6/blob/master/CHANGELOG.md\"\n                       target=\"_blank\"\n                       rel=\"noopener\"\n                       :aria-label=\"$t('multisafepay-support.changelog') + ' - ' + $t('multisafepay-support.external_link')\">\n                        {{ $t(\"multisafepay-support.changelog\") }}\n                        <span class=\"sr-only\"> – Opens in a new window</span>\n                    </a>\n                </li>\n            </ul>\n\n            <h3 class=\"mt-1\">{{ $t(\"multisafepay-support.for_developers\") }}</h3>\n            <ul class=\"multisafepay-ul\">\n                <li>\n                    <a href=\"https://docs.multisafepay.com/reference/introduction\"\n                       target=\"_blank\"\n                       rel=\"noopener\"\n                       :aria-label=\"$t('multisafepay-support.api_documentation') + ' - ' + $t('multisafepay-support.external_link')\">\n                        {{ $t(\"multisafepay-support.api_documentation\") }}\n                        <span class=\"sr-only\"> – Opens in a new window</span>\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://github.com/MultiSafepay/Shopware6\"\n                       target=\"_blank\"\n                       rel=\"noopener\"\n                       :aria-label=\"'MultiSafepay GitHub - ' + $t('multisafepay-support.external_link')\">\n                        MultiSafepay GitHub\n                        <span class=\"sr-only\"> – Opens in a new window</span>\n                    </a>\n                </li>\n            </ul>\n\n            <h2 class=\"mt-1\">{{ $t(\"multisafepay-support.account\")}}</h2>\n            <section role=\"region\" :aria-label=\"$t('multisafepay-support.account')\">\n                <p>{{ $t(\"multisafepay-support.account_needed\") }}</p>\n                <p class=\"mt-1\" v-html='$t(\"multisafepay-support.test_account\")'></p>\n                <p class=\"mt-1\" v-html='$t(\"multisafepay-support.live_account\")'></p>\n                <ul class=\"multisafepay-ul-none mt-1\" :aria-label=\"$t('multisafepay-support.contact') + ' - ' + $t('multisafepay-support.sales')\">\n                    <li>\n                        {{ $t(\"multisafepay-support.telephone\") }}:\n                        <a href=\"tel:+31208500501\"\n                           :aria-label=\"$t('multisafepay-support.telephone') + ': +31 (0)20 - 8500501'\">\n                            +31 (0)20 - 8500501\n                        </a>\n                    </li>\n                    <li>\n                        {{ $t(\"multisafepay-support.e-mail\") }}:\n                        <a href=\"mailto:sales@multisafepay.com\"\n                           :aria-label=\"$t('multisafepay-support.e-mail') + ': sales@multisafepay.com'\">\n                            sales@multisafepay.com\n                        </a>\n                    </li>\n                </ul>\n            </section>\n\n            <h2 class=\"mt-1\">{{ $t(\"multisafepay-support.contact\") }}</h2>\n            <section role=\"region\" :aria-label=\"$t('multisafepay-support.contact')\">\n                <p>{{ $t(\"multisafepay-support.assistance_integration_team\") }}</p>\n                <ul class=\"multisafepay-ul-none mt-1\" :aria-label=\"$t('multisafepay-support.contact') + ' - ' + $t('multisafepay-support.integration')\">\n                    <li>\n                        {{ $t(\"multisafepay-support.telephone\") }}:\n                        <a href=\"tel:+31208500500\"\n                           :aria-label=\"$t('multisafepay-support.telephone') + ': +31 (0)20 - 8500500'\">\n                            +31 (0)20 - 8500500\n                        </a>\n                    </li>\n                    <li>\n                        {{ $t(\"multisafepay-support.e-mail\") }}:\n                        <a href=\"mailto:integration@multisafepay.com\"\n                           :aria-label=\"$t('multisafepay-support.e-mail') + ': integration@multisafepay.com'\">\n                            integration@multisafepay.com\n                        </a>\n                    </li>\n                </ul>\n            </section>\n        </mt-container>\n    </div>\n</template>\n","// Import the Component object from Shopware\nconst {Component} = Shopware;\n\n// Import the SCSS file for this component\nimport './multisafepay-support.scss'\n\n// Import the Twig template for this component\nimport template from './multisafepay-support.html.twig';\n\n// Register the 'multisafepay-support' component with Shopware\nComponent.register('multisafepay-support', {\n    // Define the template for this component\n    template,\n    \n    // Add any data properties that might be needed\n    data() {\n        return {};\n    },\n    \n    // Add created lifecycle method to ensure the component is properly initialized\n    created() {\n        // Making sure the component is visible\n    },\n\n    // Add mounted lifecycle hook to ensure visibility\n    mounted() {\n        // Find the template parent and force display:block\n        const parentTemplate = this.$el.closest('template.sw-form-field-renderer');\n        if (parentTemplate) {\n            parentTemplate.style.display = 'block';\n        }\n        \n        // Also try to find any parent elements that might be hidden\n        let currentEl = this.$el;\n        while (currentEl) {\n            if (window.getComputedStyle(currentEl).display === 'none') {\n                currentEl.style.display = 'block';\n            }\n            currentEl = currentEl.parentElement;\n        }\n    }\n});\n","{% block sw_settings_payment_detail_content_field_after_order_enabled %}\n    {% parent %}\n    <mt-switch\n            v-if=\"isComponentAllowed\"\n            v-model=\"paymentMethod.customFields.component\"\n            name=\"sw-field--paymentMethod-customFields.component\"\n            class=\"sw-settings-payment-detail__field-custom-fields-component\"\n            label=\"Component\"\n            :help-text=\"$t('multisafepay-component.help_text')\"\n    ></mt-switch>\n    <mt-switch\n            v-if=\"isTokenizationAllowed\"\n            v-model=\"paymentMethod.customFields.tokenization\"\n            name=\"sw-field--paymentMethod-customFields.tokenization\"\n            class=\"sw-settings-payment-detail__field-custom-fields-tokenization\"\n            label=\"Tokenization\"\n            :help-text=\"$t('multisafepay-tokenization.help_text')\"\n            :disabled=\"isTokenizationDisabled\"\n    ></mt-switch>\n    <mt-switch\n            v-if=\"isMyBankDirectSupported\"\n            v-model=\"paymentMethod.customFields.direct\"\n            name=\"sw-field--paymentMethod-customFields.direct\"\n            class=\"sw-settings-payment-detail__field-custom-fields-direct\"\n            label=\"Pay inside checkout\"\n            :help-text=\"$t('multisafepay-direct.help_text')\"\n    ></mt-switch>\n{% endblock %}\n","// Import the template from the specified file\nimport template from './sw-settings-payment-detail.html.twig'\n// Import the 'Component' from the Shopware library\nconst { Component } = Shopware;\n\n// Shared constants for payment handlers that support component and tokenization\nconst COMPONENT_SUPPORTED_HANDLERS = [\n    'americanexpress',\n    'creditcard',\n    'maestro',\n    'mastercard',\n    'mbway',\n    'payafterdeliverymf',\n    'visa'\n];\n\nconst TOKENIZATION_SUPPORTED_HANDLERS = [\n    'americanexpress',\n    'creditcard',\n    'maestro',\n    'mastercard',\n    'mbway',\n    'visa'\n];\n\n// Override the 'sw-settings-payment-detail' component\nComponent.override('sw-settings-payment-detail', {\n    // Use the imported template\n    template,\n\n    // Define the data for this component\n    data() {\n        return {\n            // Define whether tokenization is supported\n            tokenizationSupported: false,\n\n            // Define whether the component is supported\n            componentSupported: false\n        }\n    },\n\n    // Inject the 'multiSafepayApiService' into this component\n    inject: [\n        'multiSafepayApiService'\n    ],\n\n    // Add computed properties\n    computed: {\n        // Computed property to determine if tokenization should be disabled\n        isTokenizationDisabled() {\n            return !(this.paymentMethod &&\n                this.paymentMethod.customFields &&\n                this.paymentMethod.customFields.component\n            ) || !this.isComponentAllowed;\n        },\n\n        // Check if MyBank is configured to pay inside checkout (direct payment)\n        isMyBankDirectSupported() {\n            return this.paymentMethod &&\n                   this.paymentMethod.handlerIdentifier &&\n                   this.paymentMethod.handlerIdentifier.toLowerCase().includes('mybank');\n        },\n\n        // Check if current payment method supports components\n        isComponentAllowed() {\n            if (!this.paymentMethod || !this.paymentMethod.handlerIdentifier) {\n                return false;\n            }\n\n            const handler = this.paymentMethod.handlerIdentifier.toLowerCase();\n\n            // Check if handler is in the static list and API confirms support\n            const isInStaticList = COMPONENT_SUPPORTED_HANDLERS.some(supportedHandler => handler.includes(supportedHandler));\n            return isInStaticList && this.componentSupported;\n        },\n\n        // Check if current payment method supports tokenization\n        isTokenizationAllowed() {\n            if (!this.paymentMethod || !this.paymentMethod.handlerIdentifier) {\n                return false;\n            }\n\n            const handler = this.paymentMethod.handlerIdentifier.toLowerCase();\n\n            // Check if handler is in the static list and API confirms support\n            const isInStaticList = TOKENIZATION_SUPPORTED_HANDLERS.some(supportedHandler => handler.includes(supportedHandler));\n            return isInStaticList && this.tokenizationSupported;\n        }\n    },\n\n    // Watch for changes in the 'paymentMethod' data property\n    watch: {\n        paymentMethod(){\n            // Initialize the 'paymentMethod' data property if it's not defined\n            if (!this.paymentMethod) {\n                this.paymentMethod = {};\n            }\n\n            // Initialize the 'id' property of 'paymentMethod' if it's not defined\n            if (!this.paymentMethod.id) {\n                this.paymentMethod.id = null;\n            }\n\n            // Initialize the 'customFields' property of 'paymentMethod' if it's not defined\n            if (!this.paymentMethod.customFields) {\n                this.paymentMethod.customFields = {};\n            }\n\n            // Initialize the 'tokenization' property of 'customFields' if it's not defined\n            if (!this.paymentMethod.customFields.tokenization) {\n                this.paymentMethod.customFields.tokenization = false;\n            }\n\n            // Initialize the 'component' property of 'customFields' if it's not defined\n            if (!this.paymentMethod.customFields.component) {\n                this.paymentMethod.customFields.component = false;\n            }\n\n            // Initialize the 'direct' property of 'customFields' if it's not defined\n            if (!this.paymentMethod.customFields.direct) {\n                this.paymentMethod.customFields.direct = false;\n            }\n\n            this.reloadEntityData();\n        },\n\n        // Watch for changes in the component field\n        'paymentMethod.customFields.component'(newValue) {\n            // If the component is disabled, tokenization should be too\n            if (!newValue &&\n                this.paymentMethod &&\n                this.paymentMethod.customFields &&\n                this.paymentMethod.customFields.tokenization\n            ) {\n                this.paymentMethod.customFields.tokenization = false;\n            }\n        },\n\n        // Watch for handlerIdentifier changes to reload API data\n        'paymentMethod.handlerIdentifier'() {\n            this.reloadEntityData();\n        }\n    },\n\n    // Lifecycle hook that is called when the component is mounted\n    mounted() {\n        this.reloadEntityData();\n    },\n\n    // Define the methods for this component\n    methods: {\n        // Method to reload the entity data\n        reloadEntityData(){\n            // Only proceed if we have a valid payment method with ID\n            if (!this.paymentMethod || !this.paymentMethod.id) {\n                this.componentSupported = false;\n                this.tokenizationSupported = false;\n                return;\n            }\n\n            // Call the 'isTokenizationAllowed' method of 'multiSafepayApiService'\n            this.multiSafepayApiService.isTokenizationAllowed(this.paymentMethod.id).then((ApiResponse) => {\n                // Set the 'tokenizationSupported' data property based on the API response\n                this.tokenizationSupported = ApiResponse.supported || false;\n            }).catch(() => {\n                this.tokenizationSupported = false;\n            });\n\n            // Call the 'isComponentAllowed' method of 'multiSafepayApiService'\n            this.multiSafepayApiService.isComponentAllowed(this.paymentMethod.id).then((ApiResponse) => {\n                // Set the 'componentSupported' data property based on the API response\n                this.componentSupported = ApiResponse.supported || false;\n            }).catch(() => {\n                this.componentSupported = false;\n            });\n        }\n    }\n});\n","{% block sw_order_detail_general_line_items_card %}\n    {% parent %}\n    <multisafepay-refund :orderId=\"orderId\"></multisafepay-refund>\n{% endblock %}\n","// Import the template from the specified file\nimport template from './sw-order-detail-general.html.twig';\n\n// In this case, we are overriding the 'sw-order-detail-general' component\nShopware.Component.override('sw-order-detail-general', {\n    // Assign the imported template to the template property of the component\n    // This will replace the default template of the component with our custom one\n    template\n});\n","{% block sw_order_detail_base_line_items_card %}\n    {% parent %}\n    <multisafepay-refund :orderId=\"orderId\"></multisafepay-refund>\n{% endblock %}\n","// Import the template from the specified file\nimport template from './sw-order-detail.html.twig';\n\n// In this case, we are overriding the 'sw-order-detail-base' component\nShopware.Component.override('sw-order-detail-base', {\n    // Assign the imported template to the template property of the component\n    // This will replace the default template of the component with our custom one\n    template\n});\n","// Define the API service class\nconst ApiService = Shopware.Classes.ApiService;\n\n// Define a new class that extends ApiService\nexport default class MultiSafepayApiService extends ApiService {\n    // Constructor for the class\n    constructor(httpClient, loginService, apiEndpoint = 'multisafepay')\n    {\n        // Call the parent class constructor\n        super(httpClient, loginService, apiEndpoint);\n    }\n\n    // Method to refund a certain amount for a specific order\n    refund(amount, orderId)\n    {\n        // Define the API route for refund\n        const apiRoute = `${this.getApiBasePath()}/refund`;\n\n        // Make a POST request to the refund API route\n        return this.httpClient.post(\n            apiRoute,\n            {\n                amount: amount * 100, // Convert the amount to cents\n                orderId: orderId // The ID of the order to refund\n            },\n            {\n                headers: this.getBasicHeaders() // Get the basic headers for the request\n            }\n        ).then((response) => {\n            return ApiService.handleResponse(response); // Handle the response from the API\n        }).catch((response) => {\n            return ApiService.handleResponse(response); // Handle the error response from the API\n        });\n    }\n\n    // Method to get refund data for a specific order\n    getRefundData(orderId)\n    {\n        // Define the API route for getting refund data\n        const apiRoute = `${this.getApiBasePath()}/get-refund-data`;\n\n        // Make a POST request to the get refund data API route\n        return this.httpClient.post(\n            apiRoute,\n            {\n                orderId: orderId // The ID of the order to get refund data for\n            },\n            {\n                headers: this.getBasicHeaders() // Get the basic headers for the request\n            }\n        ).then((response) => {\n            return ApiService.handleResponse(response); // Handle the response from the API\n        });\n    }\n\n    // Method to verify the API key\n    verifyApiKey(globalPluginConfig, actualPluginConfig)\n    {\n        // Define the API route for verifying the API key\n        const apiRoute = `${this.getApiBasePath()}/verify-api-key`;\n        const headers = this.getBasicHeaders(); // Get the basic headers for the request\n\n        // Make a POST request to the verify API key API route\n        return this.httpClient.post(\n            apiRoute,\n            {\n                globalPluginConfig: globalPluginConfig, // The global plugin configuration\n                actualPluginConfig: actualPluginConfig // The actual plugin configuration\n            },\n            {\n                headers\n            }\n        ).then((response) => {\n            return ApiService.handleResponse(response); // Handle the response from the API\n        });\n    }\n\n    // Method to check if tokenization is allowed for a specific payment method\n    isTokenizationAllowed(paymentMethodId)\n    {\n        // Define the API route for checking if tokenization is allowed\n        const apiRoute = `${this.getApiBasePath()}/tokenization-allowed`;\n\n        // Make a POST request to the tokenization allowed API route\n        return this.httpClient.post(\n            apiRoute,\n            {\n                paymentMethodId: paymentMethodId // The ID of the payment method to check\n            },\n            {\n                headers: this.getBasicHeaders() // Get the basic headers for the request\n            }\n        ).then((response) => {\n            return ApiService.handleResponse(response); // Handle the response from the API\n        }).catch((response) => {\n            return ApiService.handleResponse(response); // Handle the error response from the API\n        });\n    }\n\n    // Method to check if a component is allowed for a specific payment method\n    isComponentAllowed(paymentMethodId)\n    {\n        // Define the API route for checking if a component is allowed\n        const apiRoute = `${this.getApiBasePath()}/component-allowed`;\n\n        // Make a POST request to the component allowed API route\n        return this.httpClient.post(\n            apiRoute,\n            {\n                paymentMethodId: paymentMethodId // The ID of the payment method to check\n            },\n            {\n                headers: this.getBasicHeaders() // Get the basic headers for the request\n            }\n        ).then((response) => {\n            return ApiService.handleResponse(response); // Handle the response from the API\n        }).catch((response) => {\n            return ApiService.handleResponse(response); // Handle the error response from the API\n        });\n    }\n}\n","import './components/multisafepay-refund';\nimport './components/multisafepay-verify-api-key';\nimport './components/multisafepay-support';\nimport './paymentMethodSettings'\nimport './override/sw-order-detail-general';\nimport './override/sw-order-detail'\nimport MultiSafepayApiService from './service/MultiSafepayApi.service';\nimport localeDE from './snippets/de_DE.json';\nimport localeEN from './snippets/en_GB.json';\nimport localeNL from './snippets/nl_NL.json';\n\nconst { Application } = Shopware;\n\nApplication.addServiceProvider('multiSafepayApiService', (container) => {\n    const initContainer = Application.getContainer('init');\n    return new MultiSafepayApiService(initContainer.httpClient, container.loginService);\n});\n\nShopware.Locale.extend('de-DE', localeDE);\nShopware.Locale.extend('en-GB', localeEN);\nShopware.Locale.extend('nl-NL', localeNL);\n"],"names":["template$5","Component","Mixin","Criteria","template","ApiResponse","error","response","data","event","closeButton","template$4","configData","parent","i","currentSalesChannelId","actualConfigData","template$3","parentTemplate","currentEl","template$2","COMPONENT_SUPPORTED_HANDLERS","TOKENIZATION_SUPPORTED_HANDLERS","handler","supportedHandler","newValue","template$1","ApiService","MultiSafepayApiService","httpClient","loginService","apiEndpoint","amount","orderId","apiRoute","globalPluginConfig","actualPluginConfig","headers","paymentMethodId","Application","container","initContainer","localeDE","localeEN","localeNL"],"mappings":"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"}