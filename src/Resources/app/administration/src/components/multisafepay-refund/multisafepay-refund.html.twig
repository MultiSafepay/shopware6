<template>
    <sw-card
        title="Refund"
        v-show="isRefundAllowed"
        :isLoading="isLoading"
        class="sw-order-detail-base__line-item-grid-card"
        role="region"
        :aria-label="$tc('multisafepay-refund.refund_options')">
        <sw-number-field
            label="Amount"
            v-model:value="amount"
            placeholder="0.00"
            numberType="float"
            :step="0.01"
            :max="maxRefundableAmount"
            :disabled="isRefundDisabled"
            aria-required="true">
        </sw-number-field>
        <sw-button
            variant="primary"
            @click="showRefundModal()"
            :disabled="isRefundDisabled"
            :aria-label="$tc('multisafepay-refund.process_refund')">
            Refund
        </sw-button>
        <span class="float-right">
            <strong>Amount refunded: {{ order ? order.currency.symbol : 'currency' }}&nbsp;{{ refundedAmount }}</strong>
        </span>
        <sw-modal
            v-show="showModal"
            title="MultiSafepay refund"
            variant="small"
            @modal-close="closeModal()"
            role="dialog"
            :aria-label="$tc('multisafepay-refund.confirm_refund')">
            Are you sure you want to refund {{ order ? order.currency.symbol : 'currency' }}{{ this.amount }}?
            <br/>
            <template #modal-footer>
                <sw-button
                    @click="closeModal()"
                    size="small"
                    :aria-label="$tc('multisafepay-refund.cancel_refund')">
                    {{ $tc('global.default.cancel') }}
                </sw-button>
                <sw-button
                    @click="confirmRefund()"
                    size="small"
                    variant="primary"
                    :aria-label="$tc('multisafepay-refund.confirm_process_refund')">
                    {{ $tc('multisafepay-refund.confirm') }}
                </sw-button>
            </template>
        </sw-modal>
    </sw-card>
</template>
